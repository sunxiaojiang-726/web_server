"use strict";(self["webpackChunkhmtt"]=self["webpackChunkhmtt"]||[]).push([[438],{8925:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{title:"地大头条"}}),n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{required:"",name:"mobile",label:"手机号",placeholder:"请输入11位手机号",rules:[{required:!0,message:"请填写手机号",pattern:/^1[3-9]\d{9}$/}]},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}}),n("van-field",{attrs:{required:"",type:"password",name:"code",label:"密码",placeholder:"请输入6位密码",rules:[{required:!0,message:"请填写密码",pattern:/^\d{6}$/}]},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",disabled:e.isLoading,loading:e.isLoading,"loading-text":"正在登录ing..."}},[e._v("登录")])],1)],1)],1)},o=[],a=n(6198),r=(n(5666),n(4916),n(5306),n(2502)),s=n(4224),l=n(5922),c=n(7218),u={name:"Login",data:function(){return{user:{mobile:"18339197800",code:"246810"},isLoading:!1}},methods:{onSubmit:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,(0,r.UO)(t.user);case 4:n=e.sent,console.log(n,"登录成功"),(0,c.Z)({type:"success",message:"求真务实！\n艰苦朴素！"}),(0,s.o4)(n.data.data.token),(0,l.po)("refresh_token",n.data.data.refresh_token),t.$router.replace({path:t.$route.query.path||"/layout/home"}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),(0,c.Z)({type:"danger",message:"账号或密码错误"});case 15:t.isLoading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}},d=u,f=n(1001),m=(0,f.Z)(d,i,o,!1,null,"ace68ac8",null),p=m.exports},7218:function(e,t,n){n.d(t,{Z:function(){return E}});n(803),n(6122),n(4045),n(9314),n(1165),n(783);var i=n(6885),o=n(144),a=n(8546),r=n(4891),s=0;function l(e){e?(s||document.body.classList.add("van-toast--unclickable"),s++):(s--,s||document.body.classList.remove("van-toast--unclickable"))}var c=n(9341),u=n(1392),d=n(3432),f=(0,r.d)("toast"),m=f[0],p=f[1],v=m({mixins:[(0,c.e)()],props:{icon:String,className:null,iconPrefix:String,loadingType:String,forbidClick:Boolean,closeOnClick:Boolean,message:[Number,String],type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:"toggleClickable",forbidClick:"toggleClickable"},methods:{onClick:function(){this.closeOnClick&&this.close()},toggleClickable:function(){var e=this.value&&this.forbidClick;this.clickable!==e&&(this.clickable=e,l(e))},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")},genIcon:function(){var e=this.$createElement,t=this.icon,n=this.type,i=this.iconPrefix,o=this.loadingType,a=t||"success"===n||"fail"===n;return a?e(u.Z,{class:p("icon"),attrs:{classPrefix:i,name:t||n}}):"loading"===n?e(d.Z,{class:p("loading"),attrs:{type:o}}):void 0},genMessage:function(){var e=this.$createElement,t=this.type,n=this.message;if((0,a.Xq)(n)&&""!==n)return"html"===t?e("div",{class:p("text"),domProps:{innerHTML:n}}):e("div",{class:p("text")},[n])}},render:function(){var e,t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[t("div",{directives:[{name:"show",value:this.value}],class:[p([this.position,(e={},e[this.type]=!this.icon,e)]),this.className],on:{click:this.onClick}},[this.genIcon(),this.genMessage()])])}}),g=n(4042),h={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},y={},b=[],k=!1,C=(0,i.Z)({},h);function x(e){return(0,a.Kn)(e)?e:{message:e}}function Z(e){return document.body.contains(e)}function $(){if(a.sk)return{};if(b=b.filter((function(e){return!e.$el.parentNode||Z(e.$el)})),!b.length||k){var e=new(o.Z.extend(v))({el:document.createElement("div")});e.$on("input",(function(t){e.value=t})),b.push(e)}return b[b.length-1]}function S(e){return(0,i.Z)({},e,{overlay:e.mask||e.overlay,mask:void 0,duration:void 0})}function L(e){void 0===e&&(e={});var t=$();return t.value&&t.updateZIndex(),e=x(e),e=(0,i.Z)({},C,y[e.type||C.type],e),e.clear=function(){t.value=!1,e.onClose&&(e.onClose(),e.onClose=null),k&&!a.sk&&t.$on("closed",(function(){clearTimeout(t.timer),b=b.filter((function(e){return e!==t})),(0,g.Z)(t.$el),t.$destroy()}))},(0,i.Z)(t,S(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout((function(){t.clear()}),e.duration)),t}var O=function(e){return function(t){return L((0,i.Z)({type:e},x(t)))}};["loading","success","fail"].forEach((function(e){L[e]=O(e)})),L.clear=function(e){b.length&&(e?(b.forEach((function(e){e.clear()})),b=[]):k?b.shift().clear():b[0].clear())},L.setDefaultOptions=function(e,t){"string"===typeof e?y[e]=t:(0,i.Z)(C,e)},L.resetDefaultOptions=function(e){"string"===typeof e?y[e]=null:(C=(0,i.Z)({},h),y={})},L.allowMultiple=function(e){void 0===e&&(e=!0),k=e},L.install=function(){o.Z.use(v)},o.Z.prototype.$toast=L;var w=L,E=function(e){var t=e.type,n=e.message;"danger"===t&&(t="fail"),w({type:t,message:n})}},5922:function(e,t,n){n.d(t,{cF:function(){return o},po:function(){return i}});var i=function(e,t){localStorage.setItem(e,t)},o=function(e){return localStorage.getItem(e)}}}]);
//# sourceMappingURL=Login-legacy.affd2007.js.map