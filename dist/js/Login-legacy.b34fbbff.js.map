{"version":3,"file":"js/Login-legacy.b34fbbff.js","mappings":"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","sources":["webpack://hmtt/./src/views/Login/index.vue?8aca","webpack://hmtt/src/views/Login/index.vue","webpack://hmtt/./src/views/Login/index.vue?93c6","webpack://hmtt/./src/views/Login/index.vue","webpack://hmtt/./node_modules/vant/es/toast/lock-click.js","webpack://hmtt/./node_modules/vant/es/toast/Toast.js","webpack://hmtt/./node_modules/vant/es/toast/index.js","webpack://hmtt/./src/ui/Notify.js","webpack://hmtt/./src/utils/storage.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"地大头条\"}}),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"required\":\"\",\"name\":\"mobile\",\"label\":\"手机号\",\"placeholder\":\"请输入11位手机号\",\"rules\":[\n        { required: true, message: '请填写手机号', pattern: /^1[3-9]\\d{9}$/ }\n      ]},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}}),_c('van-field',{attrs:{\"required\":\"\",\"type\":\"password\",\"name\":\"code\",\"label\":\"密码\",\"placeholder\":\"请输入6位密码\",\"rules\":[{ required: true, message: '请填写密码', pattern: /^\\d{6}$/ }]},model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\",\"disabled\":_vm.isLoading,\"loading\":_vm.isLoading,\"loading-text\":\"正在登录ing...\"}},[_vm._v(\"登录\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-nav-bar title=\"地大头条\" />\r\n    <!-- van-form整体表单组件\r\n    @submit 自定义提交事件\r\n\r\n    van-field输入框（表单一项）\r\n    :rules 验证规则 :动态属性\r\n    required 星号\r\n    -->\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-field\r\n        v-model=\"user.mobile\"\r\n        required\r\n        name=\"mobile\"\r\n        label=\"手机号\"\r\n        placeholder=\"请输入11位手机号\"\r\n        :rules=\"[\r\n          { required: true, message: '请填写手机号', pattern: /^1[3-9]\\d{9}$/ }\r\n        ]\"\r\n      />\r\n      <van-field\r\n        v-model=\"user.code\"\r\n        required\r\n        type=\"password\"\r\n        name=\"code\"\r\n        label=\"密码\"\r\n        placeholder=\"请输入6位密码\"\r\n        :rules=\"[{ required: true, message: '请填写密码', pattern: /^\\d{6}$/ }]\"\r\n      />\r\n      <div style=\"margin: 16px\">\r\n        <!-- 圆形 块级元素  native-type:原生button标签的type属性,提交整个表单数据的按钮-->\r\n        <van-button\r\n          round\r\n          block\r\n          type=\"info\"\r\n          native-type=\"submit\"\r\n          :disabled=\"isLoading\"\r\n          :loading=\"isLoading\"\r\n          loading-text=\"正在登录ing...\"\r\n          >登录</van-button\r\n        >\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 写需求套路\r\n// 1. html+css\r\n// 2. 数据铺设,数据绑定,数据微调\r\n// 3. js交互->事件/正则\r\n\r\n// 组件使用套路\r\n// 1.明确目标，找到类似组件\r\n// 2.引入注册然后复制使用(标签和js复制)\r\n// 3.读和删没用的\r\n// 4.修改，改成我们想要的样子\r\n// (1):找到类名，自己写css覆盖掉它\r\n// (2):看文档，是否支持自定义样式\r\n\r\n// 目标1：实现顶部导航->自定义样式\r\n// 目标2：实现表单组件->读，改，加\r\n// 目标3：收集值后，调用接口->查看登录结果\r\n// 目标4：点击登录后给用户提示(正在登陆~~~)，防止用户频繁的点击\r\nimport { loginAPI } from '@/api/index.js'\r\nimport { setToken } from '@/utils/token.js'\r\nimport { setStorage } from '@/utils/storage.js'\r\n// Notify组件的函数调用\r\nimport Notify from '@/ui/Notify.js'\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      user: {\r\n        mobile: '18339197800', // 手机号\r\n        code: '246810' // 验证码(密码-必须是246810 后台规定死的，无论手机号是什么)\r\n      },\r\n      isLoading: false // 登录按钮-加载状态,刚开始不显示加载; 登录按钮-禁用状态，刚开始不禁用\r\n    }\r\n  },\r\n  methods: {\r\n    // 提交方法（需要form整体通过验证才能提交）\r\n    async onSubmit(values) {\r\n      // values可以直接用(是一个收集参数名和值的对象) === this.user，用哪个都可以\r\n      // console.log(values)\r\n      // console.log(this.user)\r\n\r\n      // 状态设置\r\n      this.isLoading = true\r\n\r\n      try {\r\n        const res = await loginAPI(this.user)\r\n        console.log(res, '登录成功')\r\n        Notify({ type: 'success', message: '求真务实！\\n艰苦朴素！' })\r\n        // 存储token\r\n        setToken(res.data.data.token)\r\n        setStorage('refresh_token', res.data.data.refresh_token) // 用于token续签\r\n        // 跳转一定要写在最后->尽量最后执行\r\n        // 不用location.href的原因，当前浏览器地址和要跳转的地址不一样时，会导致刷新网页\r\n        // 因为登录之后不需要后退，所以用replace\r\n        this.$router.replace({\r\n          // 因为我们路由规则/layout里没有重定向，所以直接在这里写全\r\n          path: this.$route.query.path || '/layout/home'\r\n        })\r\n      } catch (err) {\r\n        // Promise内ajax抛出错误，直接进入这里\r\n        Notify({ type: 'danger', message: '账号或密码错误' })\r\n      }\r\n\r\n      this.isLoading = false // 网络请求完成，无论是成功还是失败，把加载与禁用状态关闭\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// // 去调试工具找到之后改\r\n// .van-nav-bar {\r\n//   background-color: rgb(51, 183, 192);\r\n// }\r\n// // 后代选择器\r\n// /deep/ .van-nav-bar__title {\r\n//   color: #b4183f;\r\n//   font-size: 20px;\r\n// }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ace68ac8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ace68ac8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ace68ac8\",\n  null\n  \n)\n\nexport default component.exports","var lockCount = 0;\nexport function lockClick(lock) {\n  if (lock) {\n    if (!lockCount) {\n      document.body.classList.add('van-toast--unclickable');\n    }\n\n    lockCount++;\n  } else {\n    lockCount--;\n\n    if (!lockCount) {\n      document.body.classList.remove('van-toast--unclickable');\n    }\n  }\n}","// Utils\nimport { createNamespace, isDef } from '../utils';\nimport { lockClick } from './lock-click'; // Mixins\n\nimport { PopupMixin } from '../mixins/popup'; // Components\n\nimport Icon from '../icon';\nimport Loading from '../loading';\n\nvar _createNamespace = createNamespace('toast'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [PopupMixin()],\n  props: {\n    icon: String,\n    className: null,\n    iconPrefix: String,\n    loadingType: String,\n    forbidClick: Boolean,\n    closeOnClick: Boolean,\n    message: [Number, String],\n    type: {\n      type: String,\n      default: 'text'\n    },\n    position: {\n      type: String,\n      default: 'middle'\n    },\n    transition: {\n      type: String,\n      default: 'van-fade'\n    },\n    lockScroll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      clickable: false\n    };\n  },\n  mounted: function mounted() {\n    this.toggleClickable();\n  },\n  destroyed: function destroyed() {\n    this.toggleClickable();\n  },\n  watch: {\n    value: 'toggleClickable',\n    forbidClick: 'toggleClickable'\n  },\n  methods: {\n    onClick: function onClick() {\n      if (this.closeOnClick) {\n        this.close();\n      }\n    },\n    toggleClickable: function toggleClickable() {\n      var clickable = this.value && this.forbidClick;\n\n      if (this.clickable !== clickable) {\n        this.clickable = clickable;\n        lockClick(clickable);\n      }\n    },\n\n    /* istanbul ignore next */\n    onAfterEnter: function onAfterEnter() {\n      this.$emit('opened');\n\n      if (this.onOpened) {\n        this.onOpened();\n      }\n    },\n    onAfterLeave: function onAfterLeave() {\n      this.$emit('closed');\n    },\n    genIcon: function genIcon() {\n      var h = this.$createElement;\n      var icon = this.icon,\n          type = this.type,\n          iconPrefix = this.iconPrefix,\n          loadingType = this.loadingType;\n      var hasIcon = icon || type === 'success' || type === 'fail';\n\n      if (hasIcon) {\n        return h(Icon, {\n          \"class\": bem('icon'),\n          \"attrs\": {\n            \"classPrefix\": iconPrefix,\n            \"name\": icon || type\n          }\n        });\n      }\n\n      if (type === 'loading') {\n        return h(Loading, {\n          \"class\": bem('loading'),\n          \"attrs\": {\n            \"type\": loadingType\n          }\n        });\n      }\n    },\n    genMessage: function genMessage() {\n      var h = this.$createElement;\n      var type = this.type,\n          message = this.message;\n\n      if (!isDef(message) || message === '') {\n        return;\n      }\n\n      if (type === 'html') {\n        return h(\"div\", {\n          \"class\": bem('text'),\n          \"domProps\": {\n            \"innerHTML\": message\n          }\n        });\n      }\n\n      return h(\"div\", {\n        \"class\": bem('text')\n      }, [message]);\n    }\n  },\n  render: function render() {\n    var _ref;\n\n    var h = arguments[0];\n    return h(\"transition\", {\n      \"attrs\": {\n        \"name\": this.transition\n      },\n      \"on\": {\n        \"afterEnter\": this.onAfterEnter,\n        \"afterLeave\": this.onAfterLeave\n      }\n    }, [h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.value\n      }],\n      \"class\": [bem([this.position, (_ref = {}, _ref[this.type] = !this.icon, _ref)]), this.className],\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [this.genIcon(), this.genMessage()])]);\n  }\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VueToast from './Toast';\nimport { isObject, isServer } from '../utils';\nimport { removeNode } from '../utils/dom/node';\nvar defaultOptions = {\n  icon: '',\n  type: 'text',\n  // @deprecated\n  mask: false,\n  value: true,\n  message: '',\n  className: '',\n  overlay: false,\n  onClose: null,\n  onOpened: null,\n  duration: 2000,\n  iconPrefix: undefined,\n  position: 'middle',\n  transition: 'van-fade',\n  forbidClick: false,\n  loadingType: undefined,\n  getContainer: 'body',\n  overlayStyle: null,\n  closeOnClick: false,\n  closeOnClickOverlay: false\n}; // default options of specific type\n\nvar defaultOptionsMap = {};\nvar queue = [];\nvar multiple = false;\n\nvar currentOptions = _extends({}, defaultOptions);\n\nfunction parseOptions(message) {\n  if (isObject(message)) {\n    return message;\n  }\n\n  return {\n    message: message\n  };\n}\n\nfunction isInDocument(element) {\n  return document.body.contains(element);\n}\n\nfunction createInstance() {\n  /* istanbul ignore if */\n  if (isServer) {\n    return {};\n  }\n\n  queue = queue.filter(function (item) {\n    return !item.$el.parentNode || isInDocument(item.$el);\n  });\n\n  if (!queue.length || multiple) {\n    var toast = new (Vue.extend(VueToast))({\n      el: document.createElement('div')\n    });\n    toast.$on('input', function (value) {\n      toast.value = value;\n    });\n    queue.push(toast);\n  }\n\n  return queue[queue.length - 1];\n} // transform toast options to popup props\n\n\nfunction transformOptions(options) {\n  return _extends({}, options, {\n    overlay: options.mask || options.overlay,\n    mask: undefined,\n    duration: undefined\n  });\n}\n\nfunction Toast(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var toast = createInstance(); // should add z-index if previous toast has not disappeared\n\n  if (toast.value) {\n    toast.updateZIndex();\n  }\n\n  options = parseOptions(options);\n  options = _extends({}, currentOptions, defaultOptionsMap[options.type || currentOptions.type], options);\n\n  if (process.env.NODE_ENV === 'development' && options.mask) {\n    console.warn('[Vant] Toast: \"mask\" option is deprecated, use \"overlay\" option instead.');\n  }\n\n  options.clear = function () {\n    toast.value = false;\n\n    if (options.onClose) {\n      options.onClose();\n      options.onClose = null;\n    }\n\n    if (multiple && !isServer) {\n      toast.$on('closed', function () {\n        clearTimeout(toast.timer);\n        queue = queue.filter(function (item) {\n          return item !== toast;\n        });\n        removeNode(toast.$el);\n        toast.$destroy();\n      });\n    }\n  };\n\n  _extends(toast, transformOptions(options));\n\n  clearTimeout(toast.timer);\n\n  if (options.duration > 0) {\n    toast.timer = setTimeout(function () {\n      toast.clear();\n    }, options.duration);\n  }\n\n  return toast;\n}\n\nvar createMethod = function createMethod(type) {\n  return function (options) {\n    return Toast(_extends({\n      type: type\n    }, parseOptions(options)));\n  };\n};\n\n['loading', 'success', 'fail'].forEach(function (method) {\n  Toast[method] = createMethod(method);\n});\n\nToast.clear = function (all) {\n  if (queue.length) {\n    if (all) {\n      queue.forEach(function (toast) {\n        toast.clear();\n      });\n      queue = [];\n    } else if (!multiple) {\n      queue[0].clear();\n    } else {\n      queue.shift().clear();\n    }\n  }\n};\n\nToast.setDefaultOptions = function (type, options) {\n  if (typeof type === 'string') {\n    defaultOptionsMap[type] = options;\n  } else {\n    _extends(currentOptions, type);\n  }\n};\n\nToast.resetDefaultOptions = function (type) {\n  if (typeof type === 'string') {\n    defaultOptionsMap[type] = null;\n  } else {\n    currentOptions = _extends({}, defaultOptions);\n    defaultOptionsMap = {};\n  }\n};\n\nToast.allowMultiple = function (value) {\n  if (value === void 0) {\n    value = true;\n  }\n\n  multiple = value;\n};\n\nToast.install = function () {\n  Vue.use(VueToast);\n};\n\nVue.prototype.$toast = Toast;\nexport default Toast;","// 基于vant进行二次封装 / 你可以自己封装一个.vue文件组件(弹窗)\r\n// 封装通知的\"方法\"\r\n// import { Notify } from 'vant'\r\n// export default Notify\r\n\r\nimport { Toast } from 'vant'\r\n// 外面逻辑页面传入的字段，我用自定义函数解构赋值形参中转接收\r\n// 内部如何使用和传值，在这个函数体里自己决定\r\nexport default ({ type, message }) => {\r\n  if (type === 'danger') {\r\n    type = 'fail' // 因为Toast失败图标，类型叫fail才行\r\n  }\r\n  Toast({\r\n    type,\r\n    message\r\n  })\r\n}\r\n","// 封装本地存储的方式\r\n// 整个项目使用localStorage,还是sessionStorage,还是token\r\n// 只需要改变这里即可\r\n// 封装:为了统一管理,方便以后的替换和修改\r\nexport const setStorage = (key, value) => {\r\n  localStorage.setItem(key, value)\r\n}\r\n\r\nexport const getStorage = (key) => {\r\n  // 获取时,需要return\r\n  return localStorage.getItem(key)\r\n}\r\n\r\nexport const removeStorage = (key) => {\r\n  localStorage.removeItem(key)\r\n}\r\n\r\n// 左边放大镜的地方,可以把整个项目中用到localStorage的地方全部换掉.\r\n// 专门操作token的localStorage不用换,那是人家自己的\r\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onSubmit","required","message","pattern","model","value","user","callback","$$v","$set","expression","staticStyle","isLoading","_v","staticRenderFns","name","data","mobile","code","methods","values","loginAPI","res","console","Notify","type","setToken","setStorage","path","component","lockCount","lockClick","lock","document","body","classList","add","remove","_createNamespace","create","createComponent","bem","mixins","props","icon","String","className","iconPrefix","loadingType","forbidClick","Boolean","closeOnClick","Number","default","position","transition","lockScroll","clickable","mounted","toggleClickable","destroyed","watch","onClick","close","onAfterEnter","$emit","onOpened","onAfterLeave","genIcon","h","hasIcon","genMessage","_ref","arguments","defaultOptions","mask","overlay","onClose","duration","undefined","getContainer","overlayStyle","closeOnClickOverlay","defaultOptionsMap","queue","multiple","currentOptions","parseOptions","isInDocument","element","contains","createInstance","filter","item","$el","parentNode","length","toast","el","createElement","$on","push","transformOptions","options","updateZIndex","clear","clearTimeout","timer","$destroy","setTimeout","createMethod","forEach","method","all","shift","setDefaultOptions","resetDefaultOptions","allowMultiple","install","key","localStorage","setItem","getStorage","getItem"],"sourceRoot":""}